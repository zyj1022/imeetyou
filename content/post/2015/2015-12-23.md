---
title: CMD规范
date: 2015-12-23 11:26
categories:
- frontend
tags:
- cmd
- frontend
---

cmd规范 (Common module Definition)
模块化到优点：简单友好的模块化定义规范，从根本上解决命名冲突，文件依赖等等的问题
seajs等等的模块化框架遵循的是cmd的模块化规范模式，简单记录一下cmd的规范：
1. 一个模块用define关键词来定义，即define(factory)
factory可以是一个函数也可以是其他的变量；如果factory是一个函数的话，那么它的三个参数分别是require,exports,module即可以用来定义一个模块的内容：

        define(function(require, exports, module) {

          // The module code goes here

        });


2. 引用模块用require关键词，接受一个模块名作为参数，返回模块暴漏的API作为返回结果。若不成功则返回null。
3. Module Identifier模块的命名规范：
3.1. A module identifier is and must be a literal string.
3.2. Module identifiers may not have a filename extensions like .js.
3.3. Module identifiers should be dash-joined string, such as foo-bar.
3.4. Module identifiers can be a relative path, like ./foo and ../bar.

4.示例代码：

        //math.js
        define(function(require, exports, module) {
          exports.add = function() { //暴漏接口出来
            var sum = 0, i = 0, args = arguments, l = args.length;
            while (i < l) {
              sum += args[i++];
            }
            return sum;
          };
        });
        //increment.js
        define(function(require, exports, module) {
          var add = require('math').add;
          exports.increment = function(val) {
            return add(val, 1);
          };
        });
        //program.js
        define(function(require, exports, module) {
          var inc = require('increment').increment;//require模块
          var a = 1;
          inc(a); // 2

          module.id == "program";
        });
